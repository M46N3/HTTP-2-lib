<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HTTP-2-lib: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HTTP-2-lib
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">HTTP-2-lib Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock">
<h3>HTTP-2-lib</h3>
<p>More efficient use of network resources, reduced perception of latency and multiple concurrent exchanges on the same connection. </p>
<p><a href="https://m46n3.github.io/HTTP-2-lib/">Documentation</a> · <a href="https://travis-ci.com/M46N3/HTTP-2-lib/">Travis CI</a> </p>
<p><a href="https://travis-ci.com/M46N3/HTTP-2-lib"><img src="https://travis-ci.com/M46N3/HTTP-2-lib.svg?branch=master" alt="Travis Build Status" class="inline"/>
</a></p>
<h2>Table of contents</h2>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#installing-dependencies">Installing dependencies</a></li>
<li><a href="#compiling-and-running">Compiling and running</a></li>
<li><a href="#how-to-use">How to use</a></li>
<li><a href="#testing">Testing</a></li>
<li><a href="#short-introduction-to-HTTP2">Short introduction to HTTP2</a></li>
<li><a href="#whats-included">What's included</a></li>
<li><a href="#implemented-functionality">Implemented functionality</a></li>
<li><a href="#future-work">Future work</a></li>
<li><a href="#external-information">External information</a></li>
</ul>
<h2>Introduction</h2>
<p>HTTP-2-lib is an implementation of the <a href="https://tools.ietf.org/html/rfc7540">RFC 7540</a> - Hypertext Transfer Protocol Version 2 (HTTP/2) in C++. It is important to notice that this library is a work in progress, so there will be some missing HTTP/2-functionalities.</p>
<h2>Prerequisites</h2>
<ul>
<li>Linux</li>
<li><a href="https://gcc.gnu.org/">C++ compiler</a></li>
<li><a href="https://cmake.org/">CMake</a></li>
</ul>
<h2>Installing dependencies</h2>
<p>Dependencies needed to use HTTP-2-lib:</p><ul>
<li><a href="https://github.com/boostorg/boost">Boost</a>: Used for unit testing.</li>
<li><a href="https://github.com/libevent/libevent">libevent</a>: Used for asynchronous buffer read and write.</li>
<li><a href="https://github.com/nghttp2/nghttp2">nghttp2</a>: HPACK to compress and decompress header frames.</li>
<li><a href="https://github.com/openssl/openssl">OpenSSL</a>: TLS and ALPN support.</li>
</ul>
<h2>Compiling and running</h2>
<p>If you want to try the server without an IDE, use the following commands: </p><div class="fragment"><div class="line">git clone https://github.com/M46N3/HTTP-2-lib.git</div><div class="line">cd HTTP-2-lib/</div><div class="line">mkdir build</div><div class="line">cd build/</div><div class="line">cmake ..</div><div class="line">make</div><div class="line">./HTTP-2-lib-server 8443</div></div><!-- fragment --><p> Go to <a href="https://localhost:8443">https://localhost:8443</a> to visit the example site.</p>
<p>It is recommended to use a C++ IDE, you then have to follow the instruction for the chosen IDE.</p>
<h2>How to use</h2>
<p>Initialize server instance with path to private key and certificate. Remember to generate your own private key and certificate for security reasons. </p><div class="fragment"><div class="line"><a class="code" href="classh2__server.html">h2_server</a> server = <a class="code" href="classh2__server.html">h2_server</a>(<span class="stringliteral">&quot;../key.pem&quot;</span>, <span class="stringliteral">&quot;../cert.pem&quot;</span>);</div></div><!-- fragment --><p> Set path to the directory you want to serve. </p><div class="fragment"><div class="line"><a class="code" href="classh2__server.html#a0a7c4db6191b7d0f411cecafd076b005">h2_server::setPublicDir</a>(<span class="stringliteral">&quot;../public&quot;</span>);</div></div><!-- fragment --><p> Add routes to specific files, the files should be located in the public directory. </p><div class="fragment"><div class="line"><a class="code" href="classh2__server.html#a6972bbed06a6482adbaac23c3919229b">h2_server::addRoute</a>(<span class="stringliteral">&quot;/&quot;</span>, <span class="stringliteral">&quot;/index.html&quot;</span>);</div></div><!-- fragment --><p> Start the server on a specified port. </p><div class="fragment"><div class="line">server.<a class="code" href="classh2__server.html#a82347608f58d70704310e826e31df3b2">run</a>(<span class="stringliteral">&quot;443&quot;</span>);</div></div><!-- fragment --><h2>Testing</h2>
<p>If you want to run the tests from the terminal, use the following commands to print detailed information about the tests: </p><div class="fragment"><div class="line">cd HTTP-2-lib/build/</div><div class="line">./Tests --log_level=all --report_sink=./report --report_format=HRF --report_level=detailed</div></div><!-- fragment --><h2>Short introduction to HTTP2</h2>
<p>HTTP/2 has the same purpose as earlier versions of HTTP: to provide a standard way for web browsers and servers to talk to each other. The HTTP-protocol is in the application layer in the OSI-model. HTTP/2 provides an optimized transport for HTTP semantics and aims to be more efficient than earlier version of HTTP.</p>
<p>HTTP/2 enables more efficient processing of messages with binary message framing. The original request response messages are divided into header-frames and data-frames. Header-frames is the same as headers in earlier versions, and data-frames is the same as body, but is sent as individually frames on the same stream.</p>
<p>Head-of-line-blocking have been a problem in earlier versions of HTTP, HTTP/2 introduced multiplexing, which reduced the amount of head-of-line-blocking. Multiplexing of requests is achieved by each having HTTP request/response exchange associated with its own stream. Streams are largely independent of each other, so a blocked or stalled request or response does not prevent progress on other streams.</p>
<p>Flow control and prioritization is also important for HTTP/2, these features ensure that it is possible to efficiently use multiplexed streams.</p>
<p>Server push is a new feature in HTTP/2 to make request/response more efficient. Server push allows a server to speculatively send data to a client that the server anticipates the client will need. For example, if the client is requesting index.html, the server push style.css and script.js to the client, because it predict that it will need it soon.</p>
<p>In earlier version of HTTP we did not compress header fields, HTTP/2 is the first version to introduce header field compression. Because HTTP header fields used in a connection can contain large amounts of redundant data, we sent unnecessary amount of data instead of compressing it and reduce the amount of data sent over the connection.</p>
<h2>What's included</h2>
<p>Within the download you'll find the following directories and files:</p>
<div class="fragment"><div class="line">HTTP-2-lib/</div><div class="line">├── include/</div><div class="line">|   └── HTTP-2-lib/</div><div class="line">|       └── h2_server.hpp</div><div class="line">|</div><div class="line">├── public/</div><div class="line">|   ├── index.html</div><div class="line">|   ├── index2.html</div><div class="line">|   ├── script.js</div><div class="line">|   └── style.css</div><div class="line">|   </div><div class="line">├── src/</div><div class="line">|   ├── h2_callbacks.cpp</div><div class="line">|   ├── h2_callback.hpp</div><div class="line">|   ├── h2_config.cpp</div><div class="line">|   ├── h2_config.hpp</div><div class="line">|   ├── h2_enums.hpp</div><div class="line">|   ├── h2_frame_handlers.cpp</div><div class="line">|   ├── h2_frame_handlers.hpp</div><div class="line">|   ├── h2_global.hpp</div><div class="line">|   ├── h2_server.cpp</div><div class="line">|   ├── h2_structs.hpp</div><div class="line">|   ├── h2_utils.cpp</div><div class="line">|   └── h2_utils.hpp</div><div class="line">│</div><div class="line">├── tests/</div><div class="line">|   ├── h2_server.test.cpp</div><div class="line">|   ├── h2_utils.test.cpp</div><div class="line">|   └── main.test.cpp</div><div class="line">|</div><div class="line">├── cert.pem</div><div class="line">├── CMakeLists.txt</div><div class="line">├── main.cpp</div><div class="line">├── key.pem</div><div class="line">└── README.md</div></div><!-- fragment --><p> <a class="el" href="main_8cpp.html">main.cpp</a>, cert.pem and key.pem are included for demonstrative purposes only. Users of this library should generate their own cerificate and key files for security reasons.</p>
<h2>Implemented functionality</h2>
<p>HTTP-2-lib supports https, this is done by using <a href="https://tools.ietf.org/html/rfc5246">TLS</a> with <a href="https://tools.ietf.org/html/rfc7301">ALPN</a> extension. ALPN extension is used to negotiate the use of HTTP/2 with the client. Not all web browsers supports HTTP/2 over TLS, you can check which web browsers that are supported <a href="https://caniuse.com/#search=http2">here</a>.</p>
<p>Asynchronous reading and writing of frames are implemented with libevent. This feature makes it possible to read and write frames back and forth between the server and multiple clients simultaneously.</p>
<p>Currently the HTTP-2-lib server only supports GET requests, with the filetypes requested being .html, .css or .js.</p>
<h2>Future work</h2>
<p>HTTP-2-lib is far from finished. The library is expected to include more features in the future such as flow control, server push, and its own implementation of the HPACK-algorithm. We also want to support bigger payloads with multiple frames. To have a complete HTTP/2 library it would also be essential to implement support for POST, PUT and DELETE requests. The GET request should also support more filetypes, such as images.</p>
<p>List of missing features:</p><ul>
<li>Better management of stream states: <a href="https://tools.ietf.org/html/rfc7540#section-5.1">5.1. Stream States</a></li>
<li>Automated use of stream identifiers: <a href="https://tools.ietf.org/html/rfc7540#section-5.1.1">5.1.1. Stream Identifiers</a></li>
<li>Stream concurrency management: <a href="https://tools.ietf.org/html/rfc7540#section-5.1.2">5.1.2. Stream Concurrency</a></li>
<li>Flow-control scheme to avoid destructively interference between streams: <a href="https://tools.ietf.org/html/rfc7540#section-5.2">5.2. Flow Control</a></li>
<li>Management of stream priority: <a href="https://tools.ietf.org/html/rfc7540#section-5.3">5.3. Stream Priority</a></li>
<li>More advanced error handling: <a href="https://tools.ietf.org/html/rfc7540#section-5.4">5.4. Error Handling</a></li>
<li>Server push feature: <a href="https://tools.ietf.org/html/rfc7540#section-8.2">8.2. Server Push</a></li>
<li>Own implementation of HPACK: <a href="https://tools.ietf.org/html/rfc7541">RFC 7541</a></li>
<li>Keep state of flow-control on WINDOW_UPDATE frames by expanding <a class="el" href="structClientSessionData.html" title="Struct for holding all data for each individual connection and client session.">ClientSessionData</a> object for each connection: <a href="https://tools.ietf.org/html/rfc7540#section-6.9">6.9. WINDOW_UPDATE</a></li>
</ul>
<h2>External information</h2>
<ul>
<li><a href="https://tools.ietf.org/html/rfc7540">RFC 7540 - Hypertext Transfer Protocol Version 2 (HTTP/2)</a></li>
<li><a href="https://tools.ietf.org/html/rfc7541">RFC 7541 - HPACK: Header Compression for HTTP/2</a></li>
<li><a href="https://tools.ietf.org/html/rfc5246">RFC 5246 - The Transport Layer Security (TLS) Protocol Version 1.2</a></li>
<li><a href="https://tools.ietf.org/html/rfc7301">RFC 7301 - Transport Layer Security (TLS), Application-Layer Protocol Negotiation Extension</a></li>
<li><a href="https://nghttp2.org/documentation/tutorial-server.html#">Tutorial:HTTP/2 server</a></li>
<li><a href="https://nghttp2.org/documentation/tutorial-hpack.html">Tutorial:HPACK API</a></li>
<li><a href="https://www.amazon.com/Learning-HTTP-Practical-Guide-Beginners/dp/1491962445">Book: O'Reilly Media, Learning HTTP/2, A practical guide for beginners</a> </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
